{"ast":null,"code":"var _jsxFileName = \"/Users/chi6/Documents/turnitin_web/frontend/src/pages/History.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Table, Typography, Tag, Button, Space, Empty, Spin, message, Tooltip, Input } from 'antd';\nimport { SearchOutlined, EyeOutlined, DownloadOutlined, FilterOutlined, RobotOutlined } from '@ant-design/icons';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { userApi, reportApi } from '../api/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Title,\n  Paragraph,\n  Text\n} = Typography;\nconst {\n  Search\n} = Input;\nconst History = () => {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const [tasks, setTasks] = useState([]);\n  const [filteredTasks, setFilteredTasks] = useState([]);\n  const [downloading, setDownloading] = useState(false);\n  const [searchText, setSearchText] = useState('');\n  const [statusFilter, setStatusFilter] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    fetchTasks();\n  }, []);\n  useEffect(() => {\n    filterTasks();\n  }, [tasks, searchText, statusFilter]);\n  const fetchTasks = async () => {\n    try {\n      setLoading(true);\n      const tasksData = await userApi.getTasks();\n\n      // 按时间倒序排序\n      const sortedTasks = tasksData.sort((a, b) => {\n        return new Date(b.created_at) - new Date(a.created_at);\n      });\n      setTasks(sortedTasks);\n      setFilteredTasks(sortedTasks);\n    } catch (error) {\n      console.error('获取任务列表失败:', error);\n      message.error('获取历史记录失败，请稍后再试');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const filterTasks = () => {\n    let result = [...tasks];\n\n    // 按文件名搜索\n    if (searchText) {\n      result = result.filter(task => task.filename.toLowerCase().includes(searchText.toLowerCase()));\n    }\n\n    // 按状态筛选\n    if (statusFilter) {\n      result = result.filter(task => task.status === statusFilter);\n    }\n    setFilteredTasks(result);\n  };\n  const handleDownloadPdf = async taskId => {\n    try {\n      setDownloading(true);\n      const pdfBlob = await reportApi.getPdfReport(taskId);\n\n      // 创建下载链接\n      const url = window.URL.createObjectURL(new Blob([pdfBlob]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `ai_detection_report_${taskId}.pdf`);\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      message.success('PDF报告下载成功');\n    } catch (error) {\n      console.error('下载PDF报告失败:', error);\n      message.error('下载PDF报告失败');\n    } finally {\n      setDownloading(false);\n    }\n  };\n  const getStatusTag = status => {\n    switch (status) {\n      case 'uploaded':\n        return /*#__PURE__*/_jsxDEV(Tag, {\n          color: \"blue\",\n          children: \"\\u5F85\\u68C0\\u6D4B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 16\n        }, this);\n      case 'processing':\n        return /*#__PURE__*/_jsxDEV(Tag, {\n          color: \"orange\",\n          children: \"\\u68C0\\u6D4B\\u4E2D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 16\n        }, this);\n      case 'completed':\n        return /*#__PURE__*/_jsxDEV(Tag, {\n          color: \"green\",\n          children: \"\\u5DF2\\u5B8C\\u6210\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 16\n        }, this);\n      case 'failed':\n        return /*#__PURE__*/_jsxDEV(Tag, {\n          color: \"red\",\n          children: \"\\u5931\\u8D25\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(Tag, {\n          children: \"\\u672A\\u77E5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  const columns = [{\n    title: '文件名',\n    dataIndex: 'filename',\n    key: 'filename',\n    render: text => /*#__PURE__*/_jsxDEV(Text, {\n      strong: true,\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }, this)\n  }, {\n    title: '状态',\n    dataIndex: 'status',\n    key: 'status',\n    render: status => getStatusTag(status),\n    filters: [{\n      text: '待检测',\n      value: 'uploaded'\n    }, {\n      text: '检测中',\n      value: 'processing'\n    }, {\n      text: '已完成',\n      value: 'completed'\n    }, {\n      text: '失败',\n      value: 'failed'\n    }],\n    onFilter: (value, record) => record.status === value\n  }, {\n    title: 'AI内容比例',\n    dataIndex: 'ai_generated_percentage',\n    key: 'ai_generated_percentage',\n    render: value => {\n      if (value === null) return '暂无数据';\n      return /*#__PURE__*/_jsxDEV(Space, {\n        children: [/*#__PURE__*/_jsxDEV(RobotOutlined, {\n          style: {\n            color: value > 50 ? '#ff4d4f' : '#1890ff'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [value.toFixed(1), \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this);\n    },\n    sorter: (a, b) => {\n      if (a.ai_generated_percentage === null) return 1;\n      if (b.ai_generated_percentage === null) return -1;\n      return a.ai_generated_percentage - b.ai_generated_percentage;\n    }\n  }, {\n    title: '创建时间',\n    dataIndex: 'created_at',\n    key: 'created_at',\n    render: text => new Date(text).toLocaleString(),\n    sorter: (a, b) => new Date(a.created_at) - new Date(b.created_at),\n    defaultSortOrder: 'descend'\n  }, {\n    title: '操作',\n    key: 'action',\n    render: (_, record) => /*#__PURE__*/_jsxDEV(Space, {\n      size: \"small\",\n      children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"\\u67E5\\u770B\\u8BE6\\u60C5\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          size: \"small\",\n          icon: /*#__PURE__*/_jsxDEV(EyeOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 21\n          }, this),\n          onClick: () => navigate(`/result/${record.id}`),\n          disabled: record.status !== 'completed'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"\\u4E0B\\u8F7D\\u62A5\\u544A\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          size: \"small\",\n          icon: /*#__PURE__*/_jsxDEV(DownloadOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 21\n          }, this),\n          onClick: () => handleDownloadPdf(record.id),\n          disabled: record.status !== 'completed' || downloading,\n          loading: downloading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }, this)\n  }];\n  const handleSearch = value => {\n    setSearchText(value);\n  };\n  const handleReset = () => {\n    setSearchText('');\n    setStatusFilter(null);\n    setFilteredTasks(tasks);\n  };\n  const handleStatusChange = status => {\n    setStatusFilter(status === statusFilter ? null : status);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      level: 2,\n      children: \"\\u5386\\u53F2\\u68C0\\u6D4B\\u8BB0\\u5F55\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paragraph, {\n      children: \"\\u67E5\\u770B\\u60A8\\u7684\\u6240\\u6709\\u5386\\u53F2\\u68C0\\u6D4B\\u4EFB\\u52A1\\u53CA\\u7ED3\\u679C\\u3002\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      children: /*#__PURE__*/_jsxDEV(Space, {\n        children: [/*#__PURE__*/_jsxDEV(Search, {\n          placeholder: \"\\u641C\\u7D22\\u6587\\u4EF6\\u540D\",\n          allowClear: true,\n          onSearch: handleSearch,\n          style: {\n            width: 250\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Space, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            type: statusFilter === 'uploaded' ? 'primary' : 'default',\n            onClick: () => handleStatusChange('uploaded'),\n            children: \"\\u5F85\\u68C0\\u6D4B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: statusFilter === 'processing' ? 'primary' : 'default',\n            onClick: () => handleStatusChange('processing'),\n            children: \"\\u68C0\\u6D4B\\u4E2D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: statusFilter === 'completed' ? 'primary' : 'default',\n            onClick: () => handleStatusChange('completed'),\n            children: \"\\u5DF2\\u5B8C\\u6210\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: statusFilter === 'failed' ? 'primary' : 'default',\n            onClick: () => handleStatusChange('failed'),\n            children: \"\\u5931\\u8D25\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleReset,\n          children: \"\\u91CD\\u7F6E\\u7B5B\\u9009\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        padding: 100\n      },\n      children: /*#__PURE__*/_jsxDEV(Spin, {\n        size: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }, this) : filteredTasks.length > 0 ? /*#__PURE__*/_jsxDEV(Table, {\n      columns: columns,\n      dataSource: filteredTasks.map(task => ({\n        ...task,\n        key: task.id\n      })),\n      pagination: {\n        pageSize: 10,\n        showTotal: total => `共 ${total} 条记录`\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Empty, {\n      description: searchText || statusFilter ? \"没有符合条件的记录\" : \"暂无检测记录\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 9\n    }, this), !loading && tasks.length > 0 && filteredTasks.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        marginTop: 20\n      },\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleReset,\n        children: \"\\u91CD\\u7F6E\\u7B5B\\u9009\\u6761\\u4EF6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 5\n  }, this);\n};\n_s(History, \"5vr4ds/a0ezq49isXFjWsf8Kuhg=\", false, function () {\n  return [useNavigate];\n});\n_c = History;\nexport default History;\nvar _c;\n$RefreshReg$(_c, \"History\");","map":{"version":3,"names":["React","useState","useEffect","Table","Typography","Tag","Button","Space","Empty","Spin","message","Tooltip","Input","SearchOutlined","EyeOutlined","DownloadOutlined","FilterOutlined","RobotOutlined","Link","useNavigate","userApi","reportApi","jsxDEV","_jsxDEV","Title","Paragraph","Text","Search","History","_s","loading","setLoading","tasks","setTasks","filteredTasks","setFilteredTasks","downloading","setDownloading","searchText","setSearchText","statusFilter","setStatusFilter","navigate","fetchTasks","filterTasks","tasksData","getTasks","sortedTasks","sort","a","b","Date","created_at","error","console","result","filter","task","filename","toLowerCase","includes","status","handleDownloadPdf","taskId","pdfBlob","getPdfReport","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","removeChild","success","getStatusTag","color","children","fileName","_jsxFileName","lineNumber","columnNumber","columns","title","dataIndex","key","render","text","strong","filters","value","onFilter","record","style","toFixed","sorter","ai_generated_percentage","toLocaleString","defaultSortOrder","_","size","type","icon","onClick","id","disabled","handleSearch","handleReset","handleStatusChange","level","marginBottom","placeholder","allowClear","onSearch","width","textAlign","padding","length","dataSource","map","pagination","pageSize","showTotal","total","description","marginTop","_c","$RefreshReg$"],"sources":["/Users/chi6/Documents/turnitin_web/frontend/src/pages/History.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Table, Typography, Tag, Button, Space, Empty, Spin, message, Tooltip, Input } from 'antd';\nimport { \n  SearchOutlined, EyeOutlined, DownloadOutlined, \n  FilterOutlined, RobotOutlined\n} from '@ant-design/icons';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { userApi, reportApi } from '../api/api';\n\nconst { Title, Paragraph, Text } = Typography;\nconst { Search } = Input;\n\nconst History = () => {\n  const [loading, setLoading] = useState(true);\n  const [tasks, setTasks] = useState([]);\n  const [filteredTasks, setFilteredTasks] = useState([]);\n  const [downloading, setDownloading] = useState(false);\n  const [searchText, setSearchText] = useState('');\n  const [statusFilter, setStatusFilter] = useState(null);\n  \n  const navigate = useNavigate();\n\n  useEffect(() => {\n    fetchTasks();\n  }, []);\n\n  useEffect(() => {\n    filterTasks();\n  }, [tasks, searchText, statusFilter]);\n\n  const fetchTasks = async () => {\n    try {\n      setLoading(true);\n      const tasksData = await userApi.getTasks();\n      \n      // 按时间倒序排序\n      const sortedTasks = tasksData.sort((a, b) => {\n        return new Date(b.created_at) - new Date(a.created_at);\n      });\n      \n      setTasks(sortedTasks);\n      setFilteredTasks(sortedTasks);\n    } catch (error) {\n      console.error('获取任务列表失败:', error);\n      message.error('获取历史记录失败，请稍后再试');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filterTasks = () => {\n    let result = [...tasks];\n    \n    // 按文件名搜索\n    if (searchText) {\n      result = result.filter(task => \n        task.filename.toLowerCase().includes(searchText.toLowerCase())\n      );\n    }\n    \n    // 按状态筛选\n    if (statusFilter) {\n      result = result.filter(task => task.status === statusFilter);\n    }\n    \n    setFilteredTasks(result);\n  };\n\n  const handleDownloadPdf = async (taskId) => {\n    try {\n      setDownloading(true);\n      const pdfBlob = await reportApi.getPdfReport(taskId);\n      \n      // 创建下载链接\n      const url = window.URL.createObjectURL(new Blob([pdfBlob]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `ai_detection_report_${taskId}.pdf`);\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      \n      message.success('PDF报告下载成功');\n    } catch (error) {\n      console.error('下载PDF报告失败:', error);\n      message.error('下载PDF报告失败');\n    } finally {\n      setDownloading(false);\n    }\n  };\n\n  const getStatusTag = (status) => {\n    switch (status) {\n      case 'uploaded':\n        return <Tag color=\"blue\">待检测</Tag>;\n      case 'processing':\n        return <Tag color=\"orange\">检测中</Tag>;\n      case 'completed':\n        return <Tag color=\"green\">已完成</Tag>;\n      case 'failed':\n        return <Tag color=\"red\">失败</Tag>;\n      default:\n        return <Tag>未知</Tag>;\n    }\n  };\n\n  const columns = [\n    {\n      title: '文件名',\n      dataIndex: 'filename',\n      key: 'filename',\n      render: (text) => <Text strong>{text}</Text>,\n    },\n    {\n      title: '状态',\n      dataIndex: 'status',\n      key: 'status',\n      render: (status) => getStatusTag(status),\n      filters: [\n        { text: '待检测', value: 'uploaded' },\n        { text: '检测中', value: 'processing' },\n        { text: '已完成', value: 'completed' },\n        { text: '失败', value: 'failed' },\n      ],\n      onFilter: (value, record) => record.status === value,\n    },\n    {\n      title: 'AI内容比例',\n      dataIndex: 'ai_generated_percentage',\n      key: 'ai_generated_percentage',\n      render: (value) => {\n        if (value === null) return '暂无数据';\n        return (\n          <Space>\n            <RobotOutlined style={{ color: value > 50 ? '#ff4d4f' : '#1890ff' }} />\n            <span>{value.toFixed(1)}%</span>\n          </Space>\n        );\n      },\n      sorter: (a, b) => {\n        if (a.ai_generated_percentage === null) return 1;\n        if (b.ai_generated_percentage === null) return -1;\n        return a.ai_generated_percentage - b.ai_generated_percentage;\n      },\n    },\n    {\n      title: '创建时间',\n      dataIndex: 'created_at',\n      key: 'created_at',\n      render: (text) => new Date(text).toLocaleString(),\n      sorter: (a, b) => new Date(a.created_at) - new Date(b.created_at),\n      defaultSortOrder: 'descend',\n    },\n    {\n      title: '操作',\n      key: 'action',\n      render: (_, record) => (\n        <Space size=\"small\">\n          <Tooltip title=\"查看详情\">\n            <Button \n              type=\"primary\" \n              size=\"small\" \n              icon={<EyeOutlined />} \n              onClick={() => navigate(`/result/${record.id}`)}\n              disabled={record.status !== 'completed'}\n            />\n          </Tooltip>\n          <Tooltip title=\"下载报告\">\n            <Button\n              size=\"small\"\n              icon={<DownloadOutlined />}\n              onClick={() => handleDownloadPdf(record.id)}\n              disabled={record.status !== 'completed' || downloading}\n              loading={downloading}\n            />\n          </Tooltip>\n        </Space>\n      ),\n    },\n  ];\n\n  const handleSearch = (value) => {\n    setSearchText(value);\n  };\n\n  const handleReset = () => {\n    setSearchText('');\n    setStatusFilter(null);\n    setFilteredTasks(tasks);\n  };\n\n  const handleStatusChange = (status) => {\n    setStatusFilter(status === statusFilter ? null : status);\n  };\n\n  return (\n    <div>\n      <Title level={2}>历史检测记录</Title>\n      <Paragraph>查看您的所有历史检测任务及结果。</Paragraph>\n      \n      <div style={{ marginBottom: 16 }}>\n        <Space>\n          <Search\n            placeholder=\"搜索文件名\"\n            allowClear\n            onSearch={handleSearch}\n            style={{ width: 250 }}\n          />\n          <Space>\n            <Button \n              type={statusFilter === 'uploaded' ? 'primary' : 'default'} \n              onClick={() => handleStatusChange('uploaded')}\n            >\n              待检测\n            </Button>\n            <Button \n              type={statusFilter === 'processing' ? 'primary' : 'default'} \n              onClick={() => handleStatusChange('processing')}\n            >\n              检测中\n            </Button>\n            <Button \n              type={statusFilter === 'completed' ? 'primary' : 'default'} \n              onClick={() => handleStatusChange('completed')}\n            >\n              已完成\n            </Button>\n            <Button \n              type={statusFilter === 'failed' ? 'primary' : 'default'} \n              onClick={() => handleStatusChange('failed')}\n            >\n              失败\n            </Button>\n          </Space>\n          <Button onClick={handleReset}>重置筛选</Button>\n        </Space>\n      </div>\n      \n      {loading ? (\n        <div style={{ textAlign: 'center', padding: 100 }}>\n          <Spin size=\"large\" />\n        </div>\n      ) : filteredTasks.length > 0 ? (\n        <Table \n          columns={columns} \n          dataSource={filteredTasks.map(task => ({ ...task, key: task.id }))} \n          pagination={{ \n            pageSize: 10,\n            showTotal: (total) => `共 ${total} 条记录`\n          }}\n        />\n      ) : (\n        <Empty description={searchText || statusFilter ? \"没有符合条件的记录\" : \"暂无检测记录\"} />\n      )}\n      \n      {!loading && tasks.length > 0 && filteredTasks.length === 0 && (\n        <div style={{ textAlign: 'center', marginTop: 20 }}>\n          <Button onClick={handleReset}>重置筛选条件</Button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default History; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}