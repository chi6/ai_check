# AI检测测试脚本使用指南

我们创建了两个脚本，用于测试AI检测系统的性能。这两个脚本直接调用`backend/app/services/ai_detection_service.py`中的方法，对AI生成文本和人类撰写文本进行识别测试。

## 1. 样本测试脚本 (`test_detection_samples.py`)

这个脚本包含预定义的4个文本样本（2个AI生成文本和2个人类撰写文本），用于快速验证AI检测功能是否正常工作。

### 使用方法

```bash
python test_detection_samples.py
```

脚本会测试两个检测方法：
- `detect_ai_content_comprehensive`: 综合检测方法
- `detect_ai_content`: 原始检测方法

### 输出内容

- 每个样本的检测结果
- 总体准确率
- AI文本和人类文本的识别准确率
- 关键特征的平均值（困惑度、风格一致性）
- 详细分析结果会保存为JSON文件

## 2. 数据集测试脚本 (`test_daigt_dataset.py`)

这个脚本用于在完整的DAIGT-v2数据集上测试AI检测系统的性能。

### 使用方法

基本用法：
```bash
python test_daigt_dataset.py
```

支持的命令行参数：
```bash
python test_daigt_dataset.py --samples 200 --batch 20 --dataset 路径/到/数据集.csv
```

- `--samples`: 指定要测试的样本数量（默认：100）
- `--batch`: 指定批处理大小（默认：10）
- `--dataset`: 指定数据集文件路径

### 输出内容

- 处理进度和各个样本的检测结果
- 总体准确率和分类指标
- AI文本和人类文本的平均特征值
- 详细测试结果保存为JSON文件

## 注意事项

1. 请确保在项目根目录下运行这些脚本，以便正确导入AI检测服务
2. 测试大量样本时可能需要较长时间，请耐心等待
3. 如果遇到内存问题，可以减小批处理大小或测试样本数
4. 测试结果会自动保存，方便后续分析

## 如何解读结果

### 关键指标

- **准确率(Accuracy)**: 正确预测的百分比
- **AI文本准确率**: 成功识别为AI的百分比
- **人类文本准确率**: 成功识别为人类的百分比

### 特征分析

- **困惑度(Perplexity)**: 通常AI生成文本的困惑度较低(< 20)，人类文本较高
- **风格一致性**: 通常AI生成文本的风格一致性较高(> 0.9)，人类文本较低

通过比较这些特征的分布，可以了解AI检测系统的工作原理和有效性。 